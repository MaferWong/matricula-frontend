{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Wong\\\\Documents\\\\Projects\\\\Matricula\\\\matricula\\\\src\\\\components\\\\container\\\\estudiante\\\\estudiante.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { CommandBar, DefaultButton, DetailsListLayoutMode, Dialog, DialogFooter, DialogType, IconButton, Panel, PrimaryButton, SearchBox, Selection, SelectionMode, ShimmeredDetailsList } from '@fluentui/react';\nimport './estudiante.css';\nimport { restClient } from '../../../services/restClient';\nimport { EstudianteForm } from './estudianteForm';\nexport const Estudiante = () => {\n  _s();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenAlert, setIsOpenAlert] = useState(true);\n  const [estudiantes, setEstudiantes] = useState(undefined); //data.map(item => ({ ...item, nombreCurso: item.curso.nombre }))\n\n  const [filtro, setFiltro] = useState([]);\n  const [estudiante, setEstudiante] = useState();\n  const [acccion, setAccion] = useState('New');\n  useEffect(() => {\n    fetchEstudiantes();\n  }, []);\n\n  const fetchEstudiantes = async () => {\n    const response = await restClient.httpGet('/estudiante');\n\n    if (!response.length) {\n      return;\n    }\n\n    setEstudiantes(response.map(item => ({ ...item,\n      nombreCurso: item.curso.nombre,\n      nombrePais: item.pais.nombre\n    })));\n  };\n\n  const handleRefreshClick = () => {\n    setEstudiantes(undefined);\n    fetchEstudiantes();\n  };\n\n  const handleDismissClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const handleNuevoEstudianteClick = () => {\n    setAccion('New');\n    setIsOpen(true);\n  };\n\n  const handleRemoveEstudianteClick = () => {\n    setIsOpenAlert(false);\n  };\n\n  const seleccion = new Selection({\n    onSelectionChanged: () => {\n      const itemSeleccionado = seleccion.getSelection();\n      setEstudiante(itemSeleccionado.length ? itemSeleccionado[0] : null);\n    }\n  });\n\n  const handleSearchEstudiante = value => {\n    if (!value) {\n      setEstudiantes(undefined);\n      setFiltro([]);\n      fetchEstudiantes();\n      return;\n    }\n\n    const dataFilter = estudiantes && estudiantes.filter(item => item.nombre.toUpperCase().includes(value.toUpperCase()));\n    setFiltro(dataFilter);\n  };\n\n  const handleDismissAlertClick = () => {\n    setIsOpenAlert(true);\n  };\n\n  const handleEditEstudianteClick = () => {\n    if (!estudiante) return 'Selecione un estudiante';\n    setAccion('Edit');\n    setIsOpen(true);\n  };\n\n  const handleRemoverEstudianteClick = async () => {\n    if (!estudiante) return;\n    const response = await restClient.httpDelete('/estudiante', estudiante.id);\n\n    if (response === 'success') {\n      handleDismissAlertClick();\n      setEstudiantes(undefined);\n      fetchEstudiantes();\n    }\n  };\n\n  const handleNoRemoverEstudianteClick = () => {\n    handleDismissAlertClick();\n  };\n\n  const onRenderEdit = row => /*#__PURE__*/_jsxDEV(IconButton, {\n    iconProps: {\n      iconName: 'Edit'\n    },\n    onClick: handleEditEstudianteClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 35\n  }, this);\n\n  const onRenderDelete = row => /*#__PURE__*/_jsxDEV(IconButton, {\n    iconProps: {\n      iconName: 'Delete'\n    },\n    onClick: handleRemoveEstudianteClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 37\n  }, this);\n\n  const columns = [{\n    key: 'onRenderEdit',\n    name: '',\n    fieldName: '',\n    minWidth: 30,\n    maxWidth: 30,\n    isResizable: true,\n    onRender: onRenderEdit\n  }, {\n    key: 'onRenderDelete',\n    name: '',\n    fieldName: '',\n    minWidth: 30,\n    maxWidth: 30,\n    isResizable: true,\n    onRender: onRenderDelete\n  }, {\n    key: 'column1',\n    name: 'Id',\n    fieldName: 'id',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column2',\n    name: 'Estudiante',\n    fieldName: 'nombre',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column3',\n    name: 'Edad',\n    fieldName: 'edad',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column4',\n    name: 'Sexo',\n    fieldName: 'sexo',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column5',\n    name: 'Correo',\n    fieldName: 'correo',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column6',\n    name: 'PaisId',\n    fieldName: 'paisId',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column7',\n    name: 'Nombre del pais',\n    fieldName: 'nombrePais',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column8',\n    name: 'CursoId',\n    fieldName: 'cursoId',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column9',\n    name: 'Nombre del curso',\n    fieldName: 'nombreCurso',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }];\n  const isDisableButton = estudiante ? false : true;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"estudiante\",\n    children: [/*#__PURE__*/_jsxDEV(CommandBar // Esta es la barra de comandos en donde están los botones para agregar, editar, etc.\n    , {\n      items: [{\n        key: 'refresh',\n        text: 'Refresh',\n        iconProps: {\n          iconName: 'Refresh'\n        },\n        onClick: handleRefreshClick\n      }, {\n        key: 'newStudent',\n        text: 'New',\n        iconProps: {\n          iconName: 'Add'\n        },\n        onClick: handleNuevoEstudianteClick\n      }, {\n        key: 'removeStudent',\n        text: 'Remove',\n        iconProps: {\n          iconName: 'Delete'\n        },\n        onClick: handleRemoveEstudianteClick,\n        disabled: isDisableButton\n      }, {\n        key: 'editarEstudiante',\n        text: 'Editar Estudiante',\n        iconProps: {\n          iconName: 'Edit'\n        },\n        onClick: handleEditEstudianteClick,\n        disabled: isDisableButton\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SearchBox // Control de búsqueda\n    , {\n      styles: {\n        root: {\n          width: '300px'\n        }\n      },\n      placeholder: \"Buscar...\",\n      onSearch: handleSearchEstudiante\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contenedorLista\",\n      children: /*#__PURE__*/_jsxDEV(ShimmeredDetailsList, {\n        items: filtro.length ? filtro : estudiantes,\n        columns: columns,\n        layoutMode: DetailsListLayoutMode.justified,\n        selection: seleccion,\n        selectionPreservedOnEmptyClick: true,\n        selectionMode: SelectionMode.single,\n        enableShimmer: !estudiantes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Panel // Este es el panel que sale del lado derecho para agregar o editar información\n    , {\n      headerText: acccion === 'New' ? \"Nuevo Estudiante\" : \"Editar Estudiante\" // Aquí se valida si el título de header es para hacer uno nuevo o para editar, esto debido a que se esta reutilizando el mismo panel\n      ,\n      isOpen: isOpen,\n      onDismiss: handleDismissClick,\n      customWidth: \"700px\",\n      children: /*#__PURE__*/_jsxDEV(EstudianteForm // Este es el formulario que contiene los controles con la información\n      , {\n        fetchEstudiantes: fetchEstudiantes // Hace un GET a la API\n        ,\n        estudianteSeleccionado: estudiante || {},\n        acccion: acccion,\n        onDismiss: handleDismissClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog // Ventana de diálogo que aparece cuándo se desea remover un registro\n    , {\n      hidden: isOpenAlert,\n      onDismiss: handleDismissAlertClick,\n      dialogContentProps: {\n        type: DialogType.normal,\n        title: 'Remove Student',\n        closeButtonAriaLabel: 'Close',\n        subText: 'Remove Estudiante?'\n      },\n      modalProps: {\n        titleAriaId: '',\n        subtitleAriaId: '',\n        isBlocking: false,\n        styles: {\n          main: {\n            maxWidth: 450\n          }\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(DialogFooter // Esto muestra los dos botones en la parte inferior, conultando se desea o no eliminar el registro\n      , {\n        children: [/*#__PURE__*/_jsxDEV(PrimaryButton, {\n          onClick: handleRemoverEstudianteClick,\n          text: \"Si\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          onClick: handleNoRemoverEstudianteClick,\n          text: \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Estudiante, \"23krg9mceReICMQ578qk7f7/41E=\");\n\n_c = Estudiante;\n\nvar _c;\n\n$RefreshReg$(_c, \"Estudiante\");","map":{"version":3,"sources":["C:/Users/Wong/Documents/Projects/Matricula/matricula/src/components/container/estudiante/estudiante.js"],"names":["React","useEffect","useState","CommandBar","DefaultButton","DetailsListLayoutMode","Dialog","DialogFooter","DialogType","IconButton","Panel","PrimaryButton","SearchBox","Selection","SelectionMode","ShimmeredDetailsList","restClient","EstudianteForm","Estudiante","isOpen","setIsOpen","isOpenAlert","setIsOpenAlert","estudiantes","setEstudiantes","undefined","filtro","setFiltro","estudiante","setEstudiante","acccion","setAccion","fetchEstudiantes","response","httpGet","length","map","item","nombreCurso","curso","nombre","nombrePais","pais","handleRefreshClick","handleDismissClick","handleNuevoEstudianteClick","handleRemoveEstudianteClick","seleccion","onSelectionChanged","itemSeleccionado","getSelection","handleSearchEstudiante","value","dataFilter","filter","toUpperCase","includes","handleDismissAlertClick","handleEditEstudianteClick","handleRemoverEstudianteClick","httpDelete","id","handleNoRemoverEstudianteClick","onRenderEdit","row","iconName","onRenderDelete","columns","key","name","fieldName","minWidth","maxWidth","isResizable","onRender","isDisableButton","text","iconProps","onClick","disabled","root","width","justified","single","type","normal","title","closeButtonAriaLabel","subText","titleAriaId","subtitleAriaId","isBlocking","styles","main"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { CommandBar, DefaultButton, DetailsListLayoutMode, Dialog, DialogFooter, DialogType, IconButton, Panel, PrimaryButton, SearchBox, Selection, SelectionMode, ShimmeredDetailsList } from '@fluentui/react';\r\nimport './estudiante.css'\r\nimport { restClient } from '../../../services/restClient';\r\nimport { EstudianteForm } from './estudianteForm';\r\n\r\nexport const Estudiante = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isOpenAlert, setIsOpenAlert] = useState(true);\r\n    const [estudiantes, setEstudiantes] = useState(undefined); //data.map(item => ({ ...item, nombreCurso: item.curso.nombre }))\r\n    const [filtro, setFiltro] = useState([]);\r\n    const [estudiante, setEstudiante] = useState();\r\n    const [acccion, setAccion] = useState('New');\r\n\r\n    useEffect(() => {\r\n        fetchEstudiantes();\r\n    }, []);\r\n\r\n    const fetchEstudiantes = async () => {\r\n        const response = await restClient.httpGet('/estudiante');\r\n\r\n        if (!response.length) {\r\n            return;\r\n        }\r\n\r\n        setEstudiantes(response.map(item => ({ ...item, nombreCurso: item.curso.nombre, nombrePais: item.pais.nombre })));\r\n    }\r\n\r\n    const handleRefreshClick = () => {\r\n        setEstudiantes(undefined);\r\n\r\n        fetchEstudiantes();\r\n    }\r\n\r\n    const handleDismissClick = () => {\r\n        setIsOpen(!isOpen);\r\n    }\r\n\r\n    const handleNuevoEstudianteClick = () => {\r\n        setAccion('New');\r\n        setIsOpen(true);\r\n    }\r\n\r\n    const handleRemoveEstudianteClick = () => {\r\n        setIsOpenAlert(false);\r\n    }\r\n\r\n    const seleccion = new Selection({\r\n        onSelectionChanged: () => {\r\n            const itemSeleccionado = seleccion.getSelection();\r\n\r\n            setEstudiante(itemSeleccionado.length ? itemSeleccionado[0] : null);\r\n\r\n        },\r\n    });\r\n\r\n    const handleSearchEstudiante = value => {\r\n\r\n        if (!value) {\r\n            setEstudiantes(undefined);\r\n            setFiltro([]);\r\n            fetchEstudiantes();\r\n\r\n            return;\r\n        }\r\n\r\n        const dataFilter = estudiantes && estudiantes.filter(item => item.nombre.toUpperCase().includes(value.toUpperCase()));\r\n\r\n        setFiltro(dataFilter);\r\n    }\r\n\r\n    const handleDismissAlertClick = () => {\r\n        setIsOpenAlert(true);\r\n    }\r\n\r\n    const handleEditEstudianteClick = () => {\r\n        if (!estudiante) return 'Selecione un estudiante';\r\n\r\n        setAccion('Edit');\r\n        setIsOpen(true);\r\n    }\r\n\r\n    const handleRemoverEstudianteClick = async () => {\r\n        if (!estudiante) return;\r\n\r\n        const response = await restClient.httpDelete('/estudiante', estudiante.id);\r\n\r\n        if (response === 'success') {\r\n            handleDismissAlertClick();\r\n            setEstudiantes(undefined);\r\n            fetchEstudiantes();\r\n        }\r\n    }\r\n\r\n    const handleNoRemoverEstudianteClick = () => {\r\n\r\n        handleDismissAlertClick();\r\n    }\r\n\r\n    const onRenderEdit = (row) => <IconButton iconProps={{ iconName: 'Edit' }} onClick={handleEditEstudianteClick} />\r\n    const onRenderDelete = (row) => <IconButton iconProps={{ iconName: 'Delete' }} onClick={handleRemoveEstudianteClick} />\r\n\r\n    const columns = [\r\n        { key: 'onRenderEdit', name: '', fieldName: '', minWidth: 30, maxWidth: 30, isResizable: true, onRender: onRenderEdit },\r\n        { key: 'onRenderDelete', name: '', fieldName: '', minWidth: 30, maxWidth: 30, isResizable: true, onRender: onRenderDelete },\r\n        { key: 'column1', name: 'Id', fieldName: 'id', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column2', name: 'Estudiante', fieldName: 'nombre', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column3', name: 'Edad', fieldName: 'edad', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column4', name: 'Sexo', fieldName: 'sexo', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column5', name: 'Correo', fieldName: 'correo', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column6', name: 'PaisId', fieldName: 'paisId', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column7', name: 'Nombre del pais', fieldName: 'nombrePais', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column8', name: 'CursoId', fieldName: 'cursoId', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column9', name: 'Nombre del curso', fieldName: 'nombreCurso', minWidth: 100, maxWidth: 200, isResizable: true },\r\n    ]\r\n\r\n    const isDisableButton = estudiante ? false : true;\r\n\r\n    return (\r\n        <div className=\"estudiante\">\r\n\r\n            <CommandBar // Esta es la barra de comandos en donde están los botones para agregar, editar, etc.\r\n                items={[{\r\n                    key: 'refresh',\r\n                    text: 'Refresh',\r\n                    iconProps: { iconName: 'Refresh' },\r\n                    onClick: handleRefreshClick,\r\n                }, {\r\n                    key: 'newStudent',\r\n                    text: 'New',\r\n                    iconProps: { iconName: 'Add' },\r\n                    onClick: handleNuevoEstudianteClick,\r\n                },\r\n                {\r\n                    key: 'removeStudent',\r\n                    text: 'Remove',\r\n                    iconProps: { iconName: 'Delete' },\r\n                    onClick: handleRemoveEstudianteClick,\r\n                    disabled: isDisableButton\r\n                }, {\r\n                    key: 'editarEstudiante',\r\n                    text: 'Editar Estudiante',\r\n                    iconProps: { iconName: 'Edit' },\r\n                    onClick: handleEditEstudianteClick,\r\n                    disabled: isDisableButton\r\n                }]}\r\n            />\r\n\r\n            <SearchBox // Control de búsqueda\r\n                styles={{ root: { width: '300px' } }} placeholder=\"Buscar...\" onSearch={handleSearchEstudiante} />\r\n\r\n            <div className=\"contenedorLista\">\r\n                <ShimmeredDetailsList\r\n                    items={filtro.length ? filtro : estudiantes}\r\n                    columns={columns}\r\n                    layoutMode={DetailsListLayoutMode.justified}\r\n                    selection={seleccion}\r\n                    selectionPreservedOnEmptyClick={true}\r\n                    selectionMode={SelectionMode.single}\r\n                    enableShimmer={!estudiantes}\r\n                />\r\n            </div>\r\n\r\n            <Panel // Este es el panel que sale del lado derecho para agregar o editar información\r\n                headerText={acccion === 'New' ? \"Nuevo Estudiante\" : \"Editar Estudiante\"} // Aquí se valida si el título de header es para hacer uno nuevo o para editar, esto debido a que se esta reutilizando el mismo panel\r\n                isOpen={isOpen}\r\n                onDismiss={handleDismissClick}\r\n                customWidth=\"700px\"\r\n            >\r\n                <EstudianteForm // Este es el formulario que contiene los controles con la información\r\n                    fetchEstudiantes={fetchEstudiantes} // Hace un GET a la API\r\n                    estudianteSeleccionado={estudiante || {}}\r\n                    acccion={acccion}\r\n                    onDismiss={handleDismissClick}\r\n                />\r\n            </Panel>\r\n\r\n            <Dialog // Ventana de diálogo que aparece cuándo se desea remover un registro\r\n                hidden={isOpenAlert}\r\n                onDismiss={handleDismissAlertClick}\r\n                dialogContentProps={{\r\n                    type: DialogType.normal,\r\n                    title: 'Remove Student',\r\n                    closeButtonAriaLabel: 'Close',\r\n                    subText: 'Remove Estudiante?',\r\n                }}\r\n                modalProps={{\r\n                    titleAriaId: '',\r\n                    subtitleAriaId: '',\r\n                    isBlocking: false,\r\n                    styles: { main: { maxWidth: 450 } },\r\n                }}\r\n            >\r\n\r\n                <DialogFooter\r\n                // Esto muestra los dos botones en la parte inferior, conultando se desea o no eliminar el registro\r\n                >\r\n                    <PrimaryButton onClick={handleRemoverEstudianteClick} text=\"Si\" />\r\n                    <DefaultButton onClick={handleNoRemoverEstudianteClick} text=\"No\" />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}