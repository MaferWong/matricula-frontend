{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Wong\\\\Documents\\\\Projects\\\\Matricula\\\\matricula\\\\src\\\\components\\\\container\\\\materia\\\\materia.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { CommandBar, DefaultButton, DetailsListLayoutMode, Dialog, DialogFooter, DialogType, IconButton, Panel, PrimaryButton, SearchBox, Selection, SelectionMode, ShimmeredDetailsList } from '@fluentui/react';\nimport './materia.css';\nimport { restClient } from '../../../services/restClient';\nimport { MateriaForm } from './materiaForm';\nexport const Materia = () => {\n  _s();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [isOpenAlert, setIsOpenAlert] = useState(true);\n  const [materias, setMaterias] = useState(undefined);\n  const [filtro, setFiltro] = useState([]);\n  const [materia, setMateria] = useState();\n  const [accion, setAccion] = useState('New');\n  useEffect(() => {\n    fetchMaterias();\n  }, []);\n\n  const fetchMaterias = async () => {\n    const response = await restClient.httpGet('/materia');\n\n    if (!response.length) {\n      return;\n    }\n\n    setMaterias(response.map(item => ({ ...item,\n      nombreCurso: item.curso.nombre\n    })));\n  };\n\n  const handleRefreshClick = () => {\n    setMaterias(undefined);\n    fetchMaterias();\n  };\n\n  const handleDismissClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const handleNuevoMateriaClick = () => {\n    setAccion('New');\n    setIsOpen(true);\n  };\n\n  const handleRemoveMateriaClick = () => {\n    setIsOpenAlert(false);\n  };\n\n  const seleccion = new Selection({\n    onSelectionChanged: () => {\n      const itemSeleccionado = seleccion.getSelection();\n      setMateria(itemSeleccionado.length ? itemSeleccionado[0] : null);\n    }\n  });\n\n  const handleSearchMateria = value => {\n    if (!value) {\n      setMaterias(undefined);\n      setFiltro([]);\n      fetchMaterias();\n      return;\n    }\n\n    const dataFilter = materias && materias.filter(item => item.nombre.toUpperCase().includes(value.toUpperCase()));\n    setFiltro(dataFilter);\n  };\n\n  const handleDismissAlertClick = () => {\n    setIsOpenAlert(true);\n  };\n\n  const handleEditMateriaClick = () => {\n    if (!materia) return 'Selecione un materia';\n    setAccion('Edit');\n    setIsOpen(true);\n  };\n\n  const handleRemoverMateriaClick = async () => {\n    if (!materia) return;\n    const response = await restClient.httpDelete('/materia', materia.id);\n\n    if (response === 'success') {\n      handleDismissAlertClick();\n      setMaterias(undefined);\n      fetchMaterias();\n    }\n  };\n\n  const handleNoRemoverMateriaClick = () => {\n    handleDismissAlertClick();\n  };\n\n  const onRenderEdit = row => /*#__PURE__*/_jsxDEV(IconButton, {\n    iconProps: {\n      iconName: 'Edit'\n    },\n    onClick: handleEditMateriaClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 35\n  }, this);\n\n  const onRenderDelete = row => /*#__PURE__*/_jsxDEV(IconButton, {\n    iconProps: {\n      iconName: 'Delete'\n    },\n    onClick: handleRemoveMateriaClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 37\n  }, this);\n\n  const columns = [{\n    key: 'onRenderEdit',\n    name: '',\n    fieldName: '',\n    minWidth: 30,\n    maxWidth: 30,\n    isResizable: true,\n    onRender: onRenderEdit\n  }, {\n    key: 'onRenderDelete',\n    name: '',\n    fieldName: '',\n    minWidth: 30,\n    maxWidth: 30,\n    isResizable: true,\n    onRender: onRenderDelete\n  }, {\n    key: 'column1',\n    name: 'Id',\n    fieldName: 'id',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column2',\n    name: 'Codigo Materia',\n    fieldName: 'codigo',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column3',\n    name: 'Nombre Materia',\n    fieldName: 'nombre',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column4',\n    name: 'CursoId',\n    fieldName: 'cursoId',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }, {\n    key: 'column5',\n    name: 'Nombre Curso',\n    fieldName: 'nombreCurso',\n    minWidth: 100,\n    maxWidth: 200,\n    isResizable: true\n  }];\n  const isDisableButton = materia ? false : true;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"materia\",\n    children: [/*#__PURE__*/_jsxDEV(CommandBar // Esta es la barra de comandos en donde están los botones para agregar, editar, etc.\n    , {\n      items: [{\n        key: 'refresh',\n        text: 'Refresh',\n        iconProps: {\n          iconName: 'Refresh'\n        },\n        onClick: handleRefreshClick\n      }, {\n        key: 'nuevaMateria',\n        text: 'New',\n        iconProps: {\n          iconName: 'Add'\n        },\n        onClick: handleNuevoMateriaClick\n      }, {\n        key: 'removerMateria',\n        text: 'Remove',\n        iconProps: {\n          iconName: 'Delete'\n        },\n        onClick: handleRemoveMateriaClick,\n        disabled: isDisableButton\n      }, {\n        key: 'editarMateria',\n        text: 'Editar Materia',\n        iconProps: {\n          iconName: 'Edit'\n        },\n        onClick: handleEditMateriaClick,\n        disabled: isDisableButton\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SearchBox // Control de búsqueda\n    , {\n      styles: {\n        root: {\n          width: '300px'\n        }\n      },\n      placeholder: \"Buscar...\",\n      onSearch: handleSearchMateria\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contenedorLista\",\n      children: /*#__PURE__*/_jsxDEV(ShimmeredDetailsList, {\n        items: filtro.length ? filtro : materias,\n        columns: columns,\n        layoutMode: DetailsListLayoutMode.justified,\n        selection: seleccion,\n        selectionPreservedOnEmptyClick: true,\n        selectionMode: SelectionMode.single,\n        enableShimmer: !materias\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Panel // Este es el panel que sale del lado derecho para agregar o editar información\n    , {\n      headerText: accion === 'New' ? \"Nuevo Materia\" : \"Editar Materia\" // Aquí se valida si el título de header es para hacer uno nuevo o para editar, esto debido a que se esta reutilizando el mismo panel\n      ,\n      isOpen: isOpen,\n      onDismiss: handleDismissClick,\n      customWidth: \"700px\",\n      children: /*#__PURE__*/_jsxDEV(MateriaForm // Este es el formulario que contiene los controles con la información\n      , {\n        fetchMaterias: fetchMaterias // Hace un GET a la API\n        ,\n        materiaSeleccionada: materia || {},\n        accion: accion,\n        onDismiss: handleDismissClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog // Ventana de diálogo que aparece cuándo se desea remover un registro\n    , {\n      hidden: isOpenAlert,\n      onDismiss: handleDismissAlertClick,\n      dialogContentProps: {\n        type: DialogType.normal,\n        title: 'Remove Course',\n        closeButtonAriaLabel: 'Close',\n        subText: 'Remove Course?'\n      },\n      modalProps: {\n        titleAriaId: '',\n        subtitleAriaId: '',\n        isBlocking: false,\n        styles: {\n          main: {\n            maxWidth: 450\n          }\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(DialogFooter // Esto muestra los dos botones en la parte inferior, conultando se desea o no eliminar el registro\n      , {\n        children: [/*#__PURE__*/_jsxDEV(PrimaryButton, {\n          onClick: handleRemoverMateriaClick,\n          text: \"Si\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          onClick: handleNoRemoverMateriaClick,\n          text: \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Materia, \"soiqHkCYp0cPZAUhubrOR419kLg=\");\n\n_c = Materia;\n\nvar _c;\n\n$RefreshReg$(_c, \"Materia\");","map":{"version":3,"sources":["C:/Users/Wong/Documents/Projects/Matricula/matricula/src/components/container/materia/materia.js"],"names":["React","useEffect","useState","CommandBar","DefaultButton","DetailsListLayoutMode","Dialog","DialogFooter","DialogType","IconButton","Panel","PrimaryButton","SearchBox","Selection","SelectionMode","ShimmeredDetailsList","restClient","MateriaForm","Materia","isOpen","setIsOpen","isOpenAlert","setIsOpenAlert","materias","setMaterias","undefined","filtro","setFiltro","materia","setMateria","accion","setAccion","fetchMaterias","response","httpGet","length","map","item","nombreCurso","curso","nombre","handleRefreshClick","handleDismissClick","handleNuevoMateriaClick","handleRemoveMateriaClick","seleccion","onSelectionChanged","itemSeleccionado","getSelection","handleSearchMateria","value","dataFilter","filter","toUpperCase","includes","handleDismissAlertClick","handleEditMateriaClick","handleRemoverMateriaClick","httpDelete","id","handleNoRemoverMateriaClick","onRenderEdit","row","iconName","onRenderDelete","columns","key","name","fieldName","minWidth","maxWidth","isResizable","onRender","isDisableButton","text","iconProps","onClick","disabled","root","width","justified","single","type","normal","title","closeButtonAriaLabel","subText","titleAriaId","subtitleAriaId","isBlocking","styles","main"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { CommandBar, DefaultButton, DetailsListLayoutMode, Dialog, DialogFooter, DialogType, IconButton, Panel, PrimaryButton, SearchBox, Selection, SelectionMode, ShimmeredDetailsList } from '@fluentui/react';\r\nimport './materia.css'\r\nimport { restClient } from '../../../services/restClient';\r\nimport { MateriaForm } from './materiaForm';\r\n\r\n\r\nexport const Materia = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isOpenAlert, setIsOpenAlert] = useState(true);\r\n    const [materias, setMaterias] = useState(undefined);\r\n    const [filtro, setFiltro] = useState([]);\r\n    const [materia, setMateria] = useState();\r\n    const [accion, setAccion] = useState('New');\r\n\r\n    useEffect(() => {\r\n        fetchMaterias();\r\n    }, []);\r\n\r\n    const fetchMaterias = async () => {\r\n        const response = await restClient.httpGet('/materia');\r\n\r\n        if (!response.length) {\r\n            return;\r\n        }\r\n\r\n        setMaterias(response.map(item => ({ ...item, nombreCurso: item.curso.nombre })));\r\n    }\r\n\r\n    const handleRefreshClick = () => {\r\n        setMaterias(undefined);\r\n\r\n        fetchMaterias();\r\n    }\r\n\r\n    const handleDismissClick = () => {\r\n        setIsOpen(!isOpen);\r\n    }\r\n\r\n    const handleNuevoMateriaClick = () => {\r\n        setAccion('New');\r\n        setIsOpen(true);\r\n    }\r\n\r\n    const handleRemoveMateriaClick = () => {\r\n        setIsOpenAlert(false);\r\n    }\r\n\r\n    const seleccion = new Selection({\r\n        onSelectionChanged: () => {\r\n            const itemSeleccionado = seleccion.getSelection();\r\n\r\n            setMateria(itemSeleccionado.length ? itemSeleccionado[0] : null);\r\n\r\n        },\r\n    });\r\n\r\n    const handleSearchMateria = value => {\r\n\r\n        if (!value) {\r\n            setMaterias(undefined);\r\n            setFiltro([]);\r\n            fetchMaterias();\r\n\r\n            return;\r\n        }\r\n\r\n        const dataFilter = materias && materias.filter(item => item.nombre.toUpperCase().includes(value.toUpperCase()));\r\n\r\n        setFiltro(dataFilter);\r\n    }\r\n\r\n    const handleDismissAlertClick = () => {\r\n        setIsOpenAlert(true);\r\n    }\r\n\r\n    const handleEditMateriaClick = () => {\r\n        if (!materia) return 'Selecione un materia';\r\n\r\n        setAccion('Edit');\r\n        setIsOpen(true);\r\n    }\r\n\r\n    const handleRemoverMateriaClick = async () => {\r\n        if (!materia) return;\r\n\r\n        const response = await restClient.httpDelete('/materia', materia.id);\r\n\r\n        if (response === 'success') {\r\n            handleDismissAlertClick();\r\n            setMaterias(undefined);\r\n            fetchMaterias();\r\n        }\r\n    }\r\n\r\n    const handleNoRemoverMateriaClick = () => {\r\n        handleDismissAlertClick();\r\n    }\r\n\r\n    const onRenderEdit = (row) => <IconButton iconProps={{ iconName: 'Edit' }} onClick={handleEditMateriaClick} />\r\n    const onRenderDelete = (row) => <IconButton iconProps={{ iconName: 'Delete' }} onClick={handleRemoveMateriaClick} />\r\n\r\n    const columns = [\r\n        { key: 'onRenderEdit', name: '', fieldName: '', minWidth: 30, maxWidth: 30, isResizable: true, onRender: onRenderEdit },\r\n        { key: 'onRenderDelete', name: '', fieldName: '', minWidth: 30, maxWidth: 30, isResizable: true, onRender: onRenderDelete },\r\n        { key: 'column1', name: 'Id', fieldName: 'id', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column2', name: 'Codigo Materia', fieldName: 'codigo', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column3', name: 'Nombre Materia', fieldName: 'nombre', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column4', name: 'CursoId', fieldName: 'cursoId', minWidth: 100, maxWidth: 200, isResizable: true },\r\n        { key: 'column5', name: 'Nombre Curso', fieldName: 'nombreCurso', minWidth: 100, maxWidth: 200, isResizable: true },\r\n    ]\r\n\r\n    const isDisableButton = materia ? false : true;\r\n\r\n    return (\r\n        <div className=\"materia\">\r\n\r\n            <CommandBar // Esta es la barra de comandos en donde están los botones para agregar, editar, etc.\r\n                items={[{\r\n                    key: 'refresh',\r\n                    text: 'Refresh',\r\n                    iconProps: { iconName: 'Refresh' },\r\n                    onClick: handleRefreshClick,\r\n                }, {\r\n                    key: 'nuevaMateria',\r\n                    text: 'New',\r\n                    iconProps: { iconName: 'Add' },\r\n                    onClick: handleNuevoMateriaClick,\r\n                },\r\n                {\r\n                    key: 'removerMateria',\r\n                    text: 'Remove',\r\n                    iconProps: { iconName: 'Delete' },\r\n                    onClick: handleRemoveMateriaClick,\r\n                    disabled: isDisableButton\r\n                }, {\r\n                    key: 'editarMateria',\r\n                    text: 'Editar Materia',\r\n                    iconProps: { iconName: 'Edit' },\r\n                    onClick: handleEditMateriaClick,\r\n                    disabled: isDisableButton\r\n                }]}\r\n            />\r\n\r\n            <SearchBox // Control de búsqueda\r\n                styles={{ root: { width: '300px' } }} placeholder=\"Buscar...\" onSearch={handleSearchMateria} />\r\n\r\n            <div className=\"contenedorLista\">\r\n                <ShimmeredDetailsList\r\n                    items={filtro.length ? filtro : materias}\r\n                    columns={columns}\r\n                    layoutMode={DetailsListLayoutMode.justified}\r\n                    selection={seleccion}\r\n                    selectionPreservedOnEmptyClick={true}\r\n                    selectionMode={SelectionMode.single}\r\n                    enableShimmer={!materias}\r\n                />\r\n            </div>\r\n\r\n            <Panel // Este es el panel que sale del lado derecho para agregar o editar información\r\n                headerText={accion === 'New' ? \"Nuevo Materia\" : \"Editar Materia\"} // Aquí se valida si el título de header es para hacer uno nuevo o para editar, esto debido a que se esta reutilizando el mismo panel\r\n                isOpen={isOpen}\r\n                onDismiss={handleDismissClick}\r\n                customWidth=\"700px\"\r\n            >\r\n                <MateriaForm // Este es el formulario que contiene los controles con la información\r\n                    fetchMaterias={fetchMaterias} // Hace un GET a la API\r\n                    materiaSeleccionada={materia || {}}\r\n                    accion={accion}\r\n                    onDismiss={handleDismissClick}\r\n                />\r\n            </Panel>\r\n\r\n            <Dialog // Ventana de diálogo que aparece cuándo se desea remover un registro\r\n                hidden={isOpenAlert}\r\n                onDismiss={handleDismissAlertClick}\r\n                dialogContentProps={{\r\n                    type: DialogType.normal,\r\n                    title: 'Remove Course',\r\n                    closeButtonAriaLabel: 'Close',\r\n                    subText: 'Remove Course?',\r\n                }}\r\n                modalProps={{\r\n                    titleAriaId: '',\r\n                    subtitleAriaId: '',\r\n                    isBlocking: false,\r\n                    styles: { main: { maxWidth: 450 } },\r\n                }}\r\n            >\r\n\r\n                <DialogFooter\r\n                // Esto muestra los dos botones en la parte inferior, conultando se desea o no eliminar el registro\r\n                >\r\n                    <PrimaryButton onClick={handleRemoverMateriaClick} text=\"Si\" />\r\n                    <DefaultButton onClick={handleNoRemoverMateriaClick} text=\"No\" />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}